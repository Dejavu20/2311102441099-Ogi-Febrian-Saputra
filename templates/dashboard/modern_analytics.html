{% extends "dashboard/modern_base.html" %}

{% block page_title %}Analytics{% endblock %}
{% block page_subtitle %}Platform performance and insights{% endblock %}

{% block content %}
<div class="space-y-6">
    
    <!-- Key Metrics -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="bg-white rounded-xl shadow-lg p-6 animate-fade-in-up">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-500">Page Views</p>
                    <p class="text-2xl font-bold text-gray-900">1,234,567</p>
                </div>
                <div class="w-10 h-10 gradient-blue rounded-lg flex items-center justify-center">
                    <i class="fas fa-eye text-white"></i>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-xl shadow-lg p-6 animate-fade-in-up" style="animation-delay: 0.1s">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-500">Watch Time</p>
                    <p class="text-2xl font-bold text-gray-900">8,745h</p>
                </div>
                <div class="w-10 h-10 gradient-green rounded-lg flex items-center justify-center">
                    <i class="fas fa-clock text-white"></i>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-xl shadow-lg p-6 animate-fade-in-up" style="animation-delay: 0.2s">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-500">Engagement Rate</p>
                    <p class="text-2xl font-bold text-gray-900">84.2%</p>
                </div>
                <div class="w-10 h-10 gradient-purple rounded-lg flex items-center justify-center">
                    <i class="fas fa-heart text-white"></i>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-xl shadow-lg p-6 animate-fade-in-up" style="animation-delay: 0.3s">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-500">Conversion Rate</p>
                    <p class="text-2xl font-bold text-gray-900">12.5%</p>
                </div>
                <div class="w-10 h-10 gradient-orange rounded-lg flex items-center justify-center">
                    <i class="fas fa-chart-line text-white"></i>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Charts -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div class="bg-white rounded-xl shadow-lg p-6 animate-fade-in-up" style="animation-delay: 0.4s">
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Views Over Time</h2>
            <canvas id="viewsChart" height="300"></canvas>
        </div>
        
        <div class="bg-white rounded-xl shadow-lg p-6 animate-fade-in-up" style="animation-delay: 0.5s">
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Popular Genres</h2>
            <canvas id="genresChart" height="300"></canvas>
        </div>
    </div>
    
    <!-- Recent Activity -->
    <div class="bg-white rounded-xl shadow-lg p-6 animate-fade-in-up" style="animation-delay: 0.6s">
        <h2 class="text-lg font-semibold text-gray-900 mb-4">Recent Activity</h2>
        <div class="space-y-4">
            <div class="flex items-center space-x-4 p-3 bg-gray-50 rounded-lg">
                <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                    <i class="fas fa-film text-white text-sm"></i>
                </div>
                <div>
                    <p class="font-medium text-gray-900">New film "Action Hero" uploaded</p>
                    <p class="text-sm text-gray-500">2 hours ago</p>
                </div>
            </div>
            
            <div class="flex items-center space-x-4 p-3 bg-gray-50 rounded-lg">
                <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                    <i class="fas fa-user text-white text-sm"></i>
                </div>
                <div>
                    <p class="font-medium text-gray-900">New user "john_doe" registered</p>
                    <p class="text-sm text-gray-500">4 hours ago</p>
                </div>
            </div>
            
            <div class="flex items-center space-x-4 p-3 bg-gray-50 rounded-lg">
                <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center">
                    <i class="fas fa-star text-white text-sm"></i>
                </div>
                <div>
                    <p class="font-medium text-gray-900">"The Matrix" received 5-star review</p>
                    <p class="text-sm text-gray-500">6 hours ago</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Sample charts
if (typeof Chart !== 'undefined') {
    // Views Chart
    const viewsCtx = document.getElementById('viewsChart');
    if (viewsCtx) {
        new Chart(viewsCtx, {
            type: 'line',
            data: {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [{
                    label: 'Views',
                    data: [1200, 1900, 3000, 5000, 2000, 3000, 4500],
                    borderColor: 'rgb(168, 85, 247)',
                    backgroundColor: 'rgba(168, 85, 247, 0.1)',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });
    }
    
    // Genres Chart
    const genresCtx = document.getElementById('genresChart');
    if (genresCtx) {
        new Chart(genresCtx, {
            type: 'doughnut',
            data: {
                labels: ['Action', 'Comedy', 'Drama', 'Horror', 'Sci-Fi'],
                datasets: [{
                    data: [30, 25, 20, 15, 10],
                    backgroundColor: [
                        '#3B82F6',
                        '#10B981',
                        '#A855F7',
                        '#F59E0B',
                        '#EF4444'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });
    }
}
</script>
{% endblock %}
